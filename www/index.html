<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
        <title></title>

        <link href="lib/ionic/css/ionic.css" rel="stylesheet">
        <link href="css/style.css" rel="stylesheet">

        <!-- IF using Sass (run gulp sass first), then uncomment below and remove the CSS includes above
        <link href="css/ionic.app.css" rel="stylesheet">
        -->

        <!-- ionic/angularjs js -->
        <script src="lib/ionic/js/ionic.bundle.js"></script>

        <script src="lib/ngCordova/ng-cordova.js"></script>
        <!-- cordova script (this will be a 404 during development) -->
        <script src="cordova.js"></script>
        <script src="js/cordovaEvents.js"></script>

        <!-- jquery library  js -->
        <script src="js/jquery-1.11.0.js"></script>
        <script src="js/jquery-migrate-1.2.1.js"></script>

        <!-- customise js -->
        <script src="js/customjqueryss.js"></script>

    </head>
    <body ng-app="starter" ng-controller="SplashCtrl">
		<ion-view style="background:#000;">
		    <ion-content class="padding" style="background: url(images/loading.jpg);background-size: 100% 100%;background-attachment:fixed;">
		        
			</ion-content>
		</ion-view>
    </body>


    <script type="text/javascript" charset="utf-8">
        angular.module('starter', ['ionic'])

                .controller('SplashCtrl', function($scope, $ionicLoading, $timeout, $ionicPopup) {

                    $scope.show = function() {
                        $ionicLoading.show({
                            template: '<i class="ion-loading-a" style="color:rgb(202,74,35); font-size:2em;"></i><br/>Loading...'
                        });
                    };
                    $scope.hide = function() {
                        //location.href = "start.html";
                        $ionicLoading.hide();
                    };

                    $scope.show();

                    cordovaEvents.init();
                    //alert(cordovaEvents.isOnline);
                    //cordovaEvents.updateTableData(function(){alert();});
                    //$.when(function(){alert(1);}).done(function(){alert(2);})
                    /*
                     $.when( { testing: 123 } ).done(function( x ) {
                     alert( x.testing ); // Alerts "123"
                     });*/



                    $timeout(function() {
                        cordovaEvents.initDB();
                        cordovaEvents.initTables();
                        //cordovaEvents.showTables();
                        cordovaEvents.updateTableData();

                    }, 2000);

                    $timeout(function() {
                        $scope.hide();
                        if (cordovaEvents.checkConnection() == 0) {
                            var internetCheck=$ionicPopup.show({
                                template: '<i class="ion-alert-circled" style="color:green;font-size:3em;"></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Please check your connection..!',
                                title: '<b>Warning</b>',
                                scope: $scope,
                                buttons: [
                                    {
                                        text: '<b>OK</b>',
                                        type: 'button-balanced',
                                        onTap: function(e) {
                                            e.preventDefault();
                                            internetCheck.close();
                                            location.href = "start.html";
                                        }
                                    }
                                ]
                            });
                        }else{
                            location.href = "start.html";
                        }
                    }, 7000);

                });


    </script>

</html>